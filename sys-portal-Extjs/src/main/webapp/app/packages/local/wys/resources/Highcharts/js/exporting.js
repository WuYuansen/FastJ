/*
 Highcharts JS v4.1.9 (2015-10-07)
 Exporting module

 (c) 2010-2014 Torstein Honsi

 License: www.highcharts.com/license
*/
(function(b){var v=b.Chart,r=b.addEvent,t=b.removeEvent,B=HighchartsAdapter.fireEvent,q=b.createElement,s=b.discardElement,o=b.css,h=b.merge,e=b.each,w=b.extend,y=b.splat,d=Math,n=d.max,C=document,g=window,i=b.isTouchDevice,k="M",l="L",p="div",u="hidden",m="none",f="highcharts-",z="absolute",j="px",A,a=b.Renderer.prototype.symbols,x=b.getOptions(),c;w(x.lang,{printChart:"打印图表",downloadPNG:"导出图表（PNG）",downloadJPEG:"导出图表（JPEG）",downloadPDF:"导出图表（PDF）",downloadSVG:"导出图表（SVG）",contextButtonTitle:"Chart）"});x.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:m,color:"#303030",fontSize:i?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};x.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:f+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:true},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};b.post=function(E,G,H){var D,F;F=q("form",h({method:"post",action:E,enctype:"multipart/form-data"},H),{display:m},C.body);for(D in G){q("input",{type:u,name:D,value:G[D]},null,F)}F.submit();s(F)};w(v.prototype,{sanitizeSVG:function(D){return D.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\u00A0").replace(/&shy;/g,"\u00AD").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(E){return E.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(L){var M=this,D,O,J,F,E,G,N,K,I,P=h(M.options,L),H=P.exporting.allowHTML;if(!C.createElementNS){C.createElementNS=function(R,Q){return C.createElement(Q)}}O=q(p,null,{position:z,top:"-9999em",width:M.chartWidth+j,height:M.chartHeight+j},C.body);N=M.renderTo.style.width;K=M.renderTo.style.height;E=P.exporting.sourceWidth||P.chart.width||(/px$/.test(N)&&parseInt(N,10))||600;G=P.exporting.sourceHeight||P.chart.height||(/px$/.test(K)&&parseInt(K,10))||400;w(P.chart,{animation:false,renderTo:O,forExport:true,renderer:"SVGRenderer",width:E,height:G});P.exporting.enabled=false;delete P.data;P.series=[];e(M.series,function(Q){F=h(Q.options,{animation:false,enableMouseTracking:false,showCheckbox:false,visible:Q.visible});if(!F.isInternal){P.series.push(F)}});if(L){e(["xAxis","yAxis"],function(Q){e(y(L[Q]),function(S,R){P[Q][R]=h(P[Q][R],S)})})}D=new b.Chart(P,M.callback);e(["xAxis","yAxis"],function(Q){e(M[Q],function(U,S){var T=D[Q][S],W=U.getExtremes(),V=W.userMin,R=W.userMax;if(T&&(V!==A||R!==A)){T.setExtremes(V,R,true,false)}})});J=D.getChartHTML();P=null;D.destroy();s(O);if(H){I=J.match(/<\/svg>(.*?$)/);if(I){I='<foreignObject x="0" y="0" width="200" height="200">'+'<body xmlns="http://www.w3.org/1999/xhtml">'+I[1]+"</body>"+"</foreignObject>";J=J.replace("</svg>",I+"</svg>")}}J=this.sanitizeSVG(J);J=J.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'");return J},getSVGForExport:function(D,E){var F=this.options.exporting;return this.getSVG(h({chart:{borderRadius:0}},F.chartOptions,E,{exporting:{sourceWidth:(D&&D.sourceWidth)||F.sourceWidth,sourceHeight:(D&&D.sourceHeight)||F.sourceHeight}}))},exportChart:function(E,F){var D=this.getSVGForExport(E,F);E=h(this.options.exporting,E);b.post(E.url,{filename:E.filename||"chart",type:E.type,width:E.width||0,scale:E.scale||2,svg:D},E.formAttributes)},print:function(){var G=this,E=G.container,H=[],F=E.parentNode,D=C.body,I=D.childNodes;if(G.isPrinting){return}G.isPrinting=true;B(G,"beforePrint");e(I,function(K,J){if(K.nodeType===1){H[J]=K.style.display;K.style.display=m}});D.appendChild(E);g.focus();g.print();setTimeout(function(){F.appendChild(E);e(I,function(K,J){if(K.nodeType===1){K.style.display=H[J]}});G.isPrinting=false;B(G,"afterPrint")},1000)},contextMenu:function(I,R,M,L,S,Q,D){var P=this,W=P.options.navigation,H=W.menuItemStyle,U=P.chartWidth,K=P.chartHeight,X="cache-"+I,G=P[X],T=n(S,Q),F="3px 3px 10px #888",V,N,E,J,O=function(Y){if(!P.pointer.inClass(Y.target,I)){N()}};if(!G){P[X]=G=q(p,{className:I},{position:z,zIndex:1000,padding:T+j},P.container);V=q(p,null,w({MozBoxShadow:F,WebkitBoxShadow:F,boxShadow:F},W.menuStyle),G);N=function(){o(G,{display:m});if(D){D.setState(0)}P.openMenu=false};r(G,"mouseleave",function(){E=setTimeout(N,500)});r(G,"mouseenter",function(){clearTimeout(E)});r(document,"mouseup",O);r(P,"destroy",function(){t(document,"mouseup",O)});e(R,function(Z){if(Z){var Y=Z.separator?q("hr",null,null,V):q(p,{onmouseover:function(){o(this,W.menuItemHoverStyle)},onmouseout:function(){o(this,H)},onclick:function(aa){aa.stopPropagation();N();if(Z.onclick){Z.onclick.apply(P,arguments)}},innerHTML:Z.text||P.options.lang[Z.textKey]},w({cursor:"pointer"},H),V);P.exportDivElements.push(Y)}});P.exportDivElements.push(V,G);P.exportMenuWidth=G.offsetWidth;P.exportMenuHeight=G.offsetHeight}J={display:"block"};if(M+P.exportMenuWidth>U){J.right=(U-M-S-T)+j}else{J.left=(M-T)+j}if(L+Q+P.exportMenuHeight>K&&D.alignOptions.verticalAlign!=="top"){J.bottom=(K-L-T)+j}else{J.top=(L+Q-T)+j}o(G,J);P.openMenu=true},addButton:function(R){var L=this,K=L.renderer,E=h(L.options.navigation.buttonOptions,R),Q=E.onclick,D=E.menuItems,G,H,O={stroke:E.symbolStroke,fill:E.symbolFill},F=E.symbolSize||12;if(!L.btnCount){L.btnCount=0}if(!L.exportDivElements){L.exportDivElements=[];L.exportSVGElements=[]}if(E.enabled===false){return}var J=E.theme,P=J.states,I=P&&P.hover,M=P&&P.select,N;delete J.states;if(Q){N=function(S){S.stopPropagation();Q.call(L,S)}}else{if(D){N=function(){L.contextMenu(H.menuClassName,D,H.translateX,H.translateY,H.width,H.height,H);H.setState(2)}}}if(E.text&&E.symbol){J.paddingLeft=b.pick(J.paddingLeft,25)}else{if(!E.text){w(J,{width:E.width,height:E.height,padding:0})}}H=K.button(E.text,0,0,N,J,I,M).attr({title:L.options.lang[E._titleKey],"stroke-linecap":"round"});H.menuClassName=R.menuClassName||f+"menu-"+L.btnCount++;if(E.symbol){G=K.symbol(E.symbol,E.symbolX-(F/2),E.symbolY-(F/2),F,F).attr(w(O,{"stroke-width":E.symbolStrokeWidth||1,zIndex:1})).add(H)}H.add().align(w(E,{width:H.width,x:b.pick(E.x,c)}),true,"spacingBox");c+=(H.width+E.buttonSpacing)*(E.align==="right"?-1:1);L.exportSVGElements.push(H,G)},destroyExport:function(G){var E=G.target,D,F;for(D=0;D<E.exportSVGElements.length;D++){F=E.exportSVGElements[D];if(F){F.onclick=F.ontouchstart=null;E.exportSVGElements[D]=F.destroy()}}for(D=0;D<E.exportDivElements.length;D++){F=E.exportDivElements[D];t(F,"mouseleave");E.exportDivElements[D]=F.onmouseout=F.onmouseover=F.ontouchstart=F.onclick=null;s(F)}}});a.menu=function(F,H,G,E){var D=[k,F,H+2.5,l,F+G,H+2.5,k,F,H+E/2+0.5,l,F+G,H+E/2+0.5,k,F,H+E-1.5,l,F+G,H+E-1.5];return D};v.prototype.callbacks.push(function(D){var G,F=D.options.exporting,E=F.buttons;c=0;if(F.enabled!==false){for(G in E){D.addButton(E[G])}r(D,"destroy",D.destroyExport)}})}(Highcharts));
